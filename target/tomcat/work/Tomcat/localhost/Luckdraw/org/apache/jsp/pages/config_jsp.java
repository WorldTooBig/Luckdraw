/*
 * Generated by the Jasper component of Apache Tomcat
 * Version: Apache Tomcat/7.0.37
 * Generated at: 2018-03-30 07:20:29 UTC
 * Note: The last modified time of this file was set to
 *       the last modified time of the source file after
 *       generation to assist with modification tracking.
 */
package org.apache.jsp.pages;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class config_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final javax.servlet.jsp.JspFactory _jspxFactory =
          javax.servlet.jsp.JspFactory.getDefaultFactory();

  private static java.util.Map<java.lang.String,java.lang.Long> _jspx_dependants;

  private javax.el.ExpressionFactory _el_expressionfactory;
  private org.apache.tomcat.InstanceManager _jsp_instancemanager;

  public java.util.Map<java.lang.String,java.lang.Long> getDependants() {
    return _jspx_dependants;
  }

  public void _jspInit() {
    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();
    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());
  }

  public void _jspDestroy() {
  }

  public void _jspService(final javax.servlet.http.HttpServletRequest request, final javax.servlet.http.HttpServletResponse response)
        throws java.io.IOException, javax.servlet.ServletException {

    final javax.servlet.jsp.PageContext pageContext;
    javax.servlet.http.HttpSession session = null;
    final javax.servlet.ServletContext application;
    final javax.servlet.ServletConfig config;
    javax.servlet.jsp.JspWriter out = null;
    final java.lang.Object page = this;
    javax.servlet.jsp.JspWriter _jspx_out = null;
    javax.servlet.jsp.PageContext _jspx_page_context = null;


    try {
      response.setContentType("text/html; charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;

      out.write("\r\n");
      out.write("\r\n");
      out.write("<!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\">\r\n");
      out.write("<html>\r\n");
      out.write("<head>\r\n");
      out.write("<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\r\n");
      out.write("<title>Insert title here</title>\r\n");
      out.write("<script src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/js/jquery-3.3.1.min.js\"></script>\r\n");
      out.write("<link rel=\"stylesheet\" href=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/css/zhangCong_CSS.css\"></link>\r\n");
      out.write("</head>\r\n");
      out.write("<body>\r\n");
      out.write("<div style=\"margin: 5% auto; width:800px;\" ><center>\r\n");
      out.write("\t<h2>设置奖项</h2>\r\n");
      out.write("\t<ul id=\"draw\" class=\"none\" style=\"list-style-type:none; margin:0px; padding:0px;\">\r\n");
      out.write("\t\t<li>一等奖<input name=\"drawCount\" oninput=\"changeText()\"/>人</li>\r\n");
      out.write("\t\t<li>二等奖<input name=\"drawCount\" oninput=\"changeText()\"/>人</li>\r\n");
      out.write("\t\t<li>三等奖<input name=\"drawCount\" oninput=\"changeText()\"/>人</li>\r\n");
      out.write("\t\t<li>\r\n");
      out.write("\t\t\t<input type=\"button\" value=\"+\" class=\"btn_min\" onclick=\"increase()\" />\r\n");
      out.write("\t\t\t<input type=\"button\" value=\"-\" class=\"btn_min\" onclick=\"reduce()\" />\r\n");
      out.write("\t\t</li>\r\n");
      out.write("\t</ul>\r\n");
      out.write("\t<br />\r\n");
      out.write("\t<input id=\"rdone\" type=\"checkbox\" /><label for=\"rdone\">同一部门是否只能有一个人中奖</label><br /><br />\r\n");
      out.write("\t<input id=\"rfor\" type=\"checkbox\" /><label for=\"rfor\">是否可以重复中奖</label><br /><br />\r\n");
      out.write("\t共<span id=\"span_sum\" style=\"font-size: 20px; color: red; font-weight: 20px; margin: 0 3px;\">0</span>个奖项\r\n");
      out.write("\t<br />\r\n");
      out.write("\t<input type=\"button\" value=\"选择该方案\" class=\"btn\" onclick=\"yesDraw()\" />\r\n");
      out.write("\t<br />\r\n");
      out.write("\t往期抽奖方案：<br />\r\n");
      out.write("\t<select id=\"select\">\r\n");
      out.write("\t\t<option>· · · · · ·</option>\r\n");
      out.write("\t</select>\r\n");
      out.write("\t<br />\r\n");
      out.write("\t<input type=\"button\" value=\"使用\" class=\"btn\" onclick=\"application()\" />\r\n");
      out.write("\t<br /><br /><br />\r\n");
      out.write("\t<a href=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/index.jsp\" class=\"btn_a\" style=\"margin-right: 50px;\">抽奖页面</a>\r\n");
      out.write("\t<a href=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.proprietaryEvaluate("${pageContext.request.contextPath}", java.lang.String.class, (javax.servlet.jsp.PageContext)_jspx_page_context, null, false));
      out.write("/pages/userList.jsp\" class=\"btn_a\">用户设置</a>\r\n");
      out.write("\t</center>\r\n");
      out.write("</div>\r\n");
      out.write("</body>\r\n");
      out.write("<script type=\"text/javascript\">\r\n");
      out.write("\r\n");
      out.write("\tvar rulesList;//保存往期抽奖方案\r\n");
      out.write("\r\n");
      out.write("\twindow.load = oldPlan();\r\n");
      out.write("\t\r\n");
      out.write("\t//往期抽奖方案\r\n");
      out.write("\tfunction oldPlan(){\r\n");
      out.write("\t\t$.post(\"../rulesAction/findRulesList\", null, function(data){\r\n");
      out.write("\t\t\trulesList = data;\r\n");
      out.write("\t\t\tvar strs = \"\";\r\n");
      out.write("\t\t\t$(\"#select option:not(:first)\").remove();\r\n");
      out.write("\t\t\t$.each(data, function(i, v) {\r\n");
      out.write("\t\t\t\tstrs += \"<option value=\"+v.rid+\">\"+v.rule+\"===\"+v.rdone+\",\"+v.rfor+\"</option>\";\r\n");
      out.write("\t\t\t});\r\n");
      out.write("\t\t\t$(\"#select\").append(strs);\r\n");
      out.write("\t\t\t$(\"#select option\").eq(0).prop(\"disabled\", true);\r\n");
      out.write("\t\t}, \"json\");\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t//添加奖项\r\n");
      out.write("\tfunction increase() {\r\n");
      out.write("\t\tvar $li = $(\"#draw li\");\r\n");
      out.write("\t\tvar defaultValue;//弹出对话框的默认值，即设置奖项的默认名字\r\n");
      out.write("\t\tvar name;//奖项的名字\r\n");
      out.write("\t\tswitch ($li.length) {\r\n");
      out.write("\t\tcase 1:\r\n");
      out.write("\t\t\tdefaultValue = \"一等奖\";\r\n");
      out.write("\t\t\tbreak;\r\n");
      out.write("\t\tcase 2:\r\n");
      out.write("\t\t\tdefaultValue = \"二等奖\";\r\n");
      out.write("\t\t\tbreak;\r\n");
      out.write("\t\tcase 3:\r\n");
      out.write("\t\t\tdefaultValue = \"三等奖\";\r\n");
      out.write("\t\t\tbreak;\r\n");
      out.write("\t\tcase 4:\r\n");
      out.write("\t\t\tdefaultValue = \"幸运奖\";\r\n");
      out.write("\t\t\tbreak;\r\n");
      out.write("\r\n");
      out.write("\t\tdefault:\r\n");
      out.write("\t\t\tdefaultValue = \"安慰奖\";\r\n");
      out.write("\t\t\tbreak;\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\tname = prompt(\"请输入奖项名字：\", defaultValue);\r\n");
      out.write("\t\tif($li.length > 1)\r\n");
      out.write("\t\t\t$li.eq($li.length-2).after(\"<li>\"+name+\"<input value='1' name='drawCount' oninput='changeText()' />人</li>\");\r\n");
      out.write("\t\telse\r\n");
      out.write("\t\t\t$(\"#draw\").prepend(\"<li>\"+name+\"<input value='1' name='drawCount' oninput='changeText()' />人</li>\");\r\n");
      out.write("\t\tchangeText();\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t//减少奖项\r\n");
      out.write("\tfunction reduce() {\r\n");
      out.write("\t\tvar $li = $(\"#draw li\");\r\n");
      out.write("\t\tif($li.length > 1)\r\n");
      out.write("\t\t\t$li.eq($li.length-2).remove();\r\n");
      out.write("\t\tchangeText();\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t//计算奖项总数\r\n");
      out.write("\tfunction changeText() {\r\n");
      out.write("\t\tvar $inputs = $(\"input[name=drawCount]\");\r\n");
      out.write("\t\tvar sum = 0;\r\n");
      out.write("\t\tfor (var i = 0; i < $inputs.length; i++) {\r\n");
      out.write("\t\t\tsum += Number($inputs.eq(i).val()); \r\n");
      out.write("\t\t$(\"#span_sum\").text(sum);\r\n");
      out.write("\t\t}\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t//保存抽奖方案\r\n");
      out.write("\tfunction yesDraw() {\r\n");
      out.write("\t\tvar $li = $(\"#draw li:not(:last)\");\r\n");
      out.write("\t\tvar rule = \"\";\r\n");
      out.write("\t\tfor (var i = 0 ; i < $li.length; i++) {\r\n");
      out.write("\t\t\tvar text = $li.eq(i).text();\r\n");
      out.write("\t\t\tvar val = $li.children(\"input\").eq(i).val();\r\n");
      out.write("\t\t\trule += text.substring(0,text.length-1) + \"-\" + (val==\"\"?0:val) + \",\";\r\n");
      out.write("\t\t}\r\n");
      out.write("\t\trule = rule.substring(0, rule.length-1);\r\n");
      out.write("\t\tvar rdone;\r\n");
      out.write("\t\tvar rfor;\r\n");
      out.write("\t\t$(\"#rdone\").is(\":checked\")?rdone=1:rdone=0;\r\n");
      out.write("\t\t$(\"#rfor\").is(\":checked\")?rfor=1:rfor=0;\r\n");
      out.write("\t\tvar param = \"rule=\" + rule + \"&rdone=\" + rdone + \"&rfor=\" + rfor;\r\n");
      out.write("\t\t$.post(\"../rulesAction/addRules\", param, function(data) {\r\n");
      out.write("\t\t\tif (data == 1) {\r\n");
      out.write("\t\t\t\t$(\"#select option\").eq(0).prop(\"disabled\", false);\r\n");
      out.write("\t\t\t\tchangeText();\r\n");
      out.write("\t\t\t\toldPlan();\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t});\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("\t//应用选择的抽奖方案\r\n");
      out.write("\tfunction application(){\r\n");
      out.write("\t\tvar rule;\r\n");
      out.write("\t\t$.each(rulesList, function(i, v){\r\n");
      out.write("\t\t\tif (v.rid == $(\"#select\").val()) {\r\n");
      out.write("\t\t\t\trule = v;\r\n");
      out.write("\t\t\t}\r\n");
      out.write("\t\t});\r\n");
      out.write("\t\t//奖励名称和人数\r\n");
      out.write("\t\tvar rules = rule.rule.split(\",\");\r\n");
      out.write("\t\t$(\"#draw li:not(:last)\").remove();\r\n");
      out.write("\t\t$.each(rules, function(i, v) {\r\n");
      out.write("\t\t\tvar val = v.split(\"-\");\r\n");
      out.write("\t\t\t$(\"#draw li:last\").before(\"<li>\"+val[0]+\"<input value='\"+val[1]+\"' name='drawCount' oninput='changeText()' />人</li>\");\r\n");
      out.write("\t\t});\r\n");
      out.write("\t\t//是否同一部门只能中奖一次\r\n");
      out.write("\t\trule.rdone==1?$(\"#rdone\").prop(\"checked\",true):$(\"#rdone\").prop(\"checked\", false);\r\n");
      out.write("\t\t//是否可以重复中奖\r\n");
      out.write("\t\trule.rfor==1?$(\"#rfor\").prop(\"checked\",true):$(\"#rfor\").prop(\"checked\", false);\r\n");
      out.write("\r\n");
      out.write("\t}\r\n");
      out.write("\t\r\n");
      out.write("</script>\r\n");
      out.write("</html>\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("<!-- \r\n");
      out.write(" \t\r\n");
      out.write("\r\n");
      out.write(" -->\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
    } catch (java.lang.Throwable t) {
      if (!(t instanceof javax.servlet.jsp.SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          try { out.clearBuffer(); } catch (java.io.IOException e) {}
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
